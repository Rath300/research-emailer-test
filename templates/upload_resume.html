<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÑ Upload Resume - AI Cold Outreach System</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="/">üîí Final AI Cold Outreach System</a>
            <div class="ms-auto">
                <span class="badge bg-dark">{{ ai_type }}</span>
                <a href="/" class="btn btn-outline-dark btn-sm ms-2">üöÄ Back to Dashboard</a>
            </div>
        </div>
    </header>

    <div class="container mt-4">
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h3 class="mb-0">üìÑ Upload Your Resume</h3>
                        <small class="text-muted">AI will extract your profile information for better matching</small>
                    </div>
                    <div class="card-body">
                        
                        <!-- Upload Instructions -->
                        <div class="alert alert-info mb-4">
                            <h5 class="alert-heading">üìã Instructions:</h5>
                            <ul class="mb-0">
                                <li>Upload your resume in <strong>.txt format</strong></li>
                                <li>AI will extract your name, skills, experience, and contact info</li>
                                <li>This information will be used to match you with relevant startups</li>
                                <li>Your data is processed securely and never shared</li>
                            </ul>
                        </div>

                        <!-- Upload Form -->
                        <form method="POST" enctype="multipart/form-data">
                            <div class="mb-4">
                                <label for="resume" class="form-label">Select Resume File</label>
                                <input class="form-control" type="file" id="resume" name="resume" accept=".txt" required>
                                <div class="form-text">
                                    Supported formats: {{ supported_formats|join(', ') }}
                                </div>
                            </div>
                            
                            <!-- AI Processing Info -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h6 class="mb-0">ü§ñ AI Processing Features</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>What AI Extracts:</h6>
                                            <ul class="list-unstyled">
                                                <li>‚úÖ Full Name</li>
                                                <li>‚úÖ Email Address</li>
                                                <li>‚úÖ Technical Skills</li>
                                                <li>‚úÖ Years of Experience</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Additional Information:</h6>
                                            <ul class="list-unstyled">
                                                <li>‚úÖ Current Role</li>
                                                <li>‚úÖ Education Background</li>
                                                <li>‚úÖ Professional Summary</li>
                                                <li>‚úÖ Industry Experience</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="d-grid">
                                <button type="submit" class="btn btn-dark btn-lg">
                                    üöÄ Upload & Process Resume
                                </button>
                            </div>
                        </form>

                        <!-- Security Notice -->
                        <div class="alert alert-secondary mt-4">
                            <h6 class="alert-heading">üîí Privacy & Security:</h6>
                            <p class="mb-0">
                                Your resume is processed locally and securely. The uploaded file is deleted immediately after processing. 
                                Only extracted profile information is stored in your local configuration file.
                            </p>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- Sample Resume Format -->
        <div class="row justify-content-center mt-4">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">üìù Sample Resume Format</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">For best results, format your resume (.txt file) similar to this example:</p>
                        <pre class="bg-light p-3 rounded">John Doe
john.doe@email.com

EXPERIENCE
Senior Software Engineer with 5+ years of experience in full-stack development.

SKILLS
- Python, JavaScript, React, Node.js
- AWS, Docker, PostgreSQL
- Machine Learning, TensorFlow

EDUCATION
Bachelor of Science in Computer Science
University of Technology, 2018

SUMMARY
Experienced software developer passionate about building scalable applications
and working with cutting-edge technologies in AI and web development.</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script>
        // File upload validation
        document.getElementById('resume').addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const fileSize = file.size / 1024 / 1024; // MB
                if (fileSize > 16) {
                    alert('File size must be less than 16MB');
                    this.value = '';
                    return;
                }
                
                const fileName = file.name.toLowerCase();
                if (!fileName.endsWith('.txt')) {
                    alert('Please upload a .txt file');
                    this.value = '';
                    return;
                }
                
                // Show file info
                const fileInfo = document.createElement('div');
                fileInfo.className = 'alert alert-success mt-2';
                fileInfo.innerHTML = `
                    <strong>File selected:</strong> ${file.name} (${(fileSize).toFixed(2)} MB)
                    <br><small>Ready to upload and process with AI</small>
                `;
                
                // Remove any existing file info
                const existingInfo = document.querySelector('.alert-success');
                if (existingInfo && existingInfo.innerHTML.includes('File selected:')) {
                    existingInfo.remove();
                }
                
                this.parentNode.appendChild(fileInfo);
            }
        });

        // Form submission handling
        document.querySelector('form').addEventListener('submit', function(e) {
            const fileInput = document.getElementById('resume');
            if (!fileInput.files[0]) {
                e.preventDefault();
                alert('Please select a resume file to upload');
                return;
            }
            
            // Show processing message
            const submitBtn = document.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'üîÑ Processing Resume with AI...';
            
            // Add loading spinner
            const spinner = document.createElement('div');
            spinner.className = 'text-center mt-3';
            spinner.innerHTML = `
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Processing...</span>
                </div>
                <p class="mt-2 text-muted">AI is extracting your profile information...</p>
            `;
            
            this.appendChild(spinner);
        });
    </script>
</body>
</html> 